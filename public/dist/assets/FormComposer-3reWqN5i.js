import{j as e}from"../discover.js";import{r as u}from"./index-BbjoSW55.js";import S from"./FormField-CZ964PiQ.js";function C({title:i="Form",fields:h=[],initialData:o={},onSubmit:l,onFieldChange:x,submitLabel:p="Submit",resetLabel:j="Reset"}){const[n,a]=u.useState(o),[m,c]=u.useState({});u.useEffect(()=>{a(o)},[o]);const d=(r,s)=>{const t={...n,[r]:s};a(t),m[r]&&c(g=>({...g,[r]:null})),x?.(r,s,t)},v=()=>{const r={};return h.forEach(s=>{if(!(!s||!s.name)&&(s.required&&!n[s.name]&&(r[s.name]=`${s.label||s.name} is required`),s.validate&&n[s.name])){const t=s.validate(n[s.name],n);t!==!0&&(r[s.name]=t)}}),c(r),Object.keys(r).length===0},b=r=>{r.preventDefault(),v()&&l?.(n)},F=()=>{a(o),c({})};return e.jsxs("div",{className:"form-composer",children:[e.jsxs("form",{onSubmit:b,children:[i&&e.jsx("h3",{children:i}),e.jsx("div",{className:"form-fields",children:h.map((r,s)=>!r||!r.name?null:e.jsxs("div",{className:"field-wrapper",children:[e.jsx(S,{...r,value:n[r.name],onChange:d}),m[r.name]&&e.jsx("div",{className:"field-error",children:m[r.name]})]},r.name||s))}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",children:p}),e.jsx("button",{type:"button",onClick:F,children:j})]})]}),e.jsxs("div",{className:"form-debug",style:{marginTop:"20px",fontSize:"12px",color:"#666"},children:[e.jsx("strong",{children:"Form Data:"})," ",JSON.stringify(n,null,2)]})]})}export{C as default};
